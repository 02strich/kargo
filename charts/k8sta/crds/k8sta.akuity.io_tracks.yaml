---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.0
  creationTimestamp: null
  name: tracks.k8sta.akuity.io
spec:
  group: k8sta.akuity.io
  names:
    kind: Track
    listKind: TrackList
    plural: tracks
    singular: track
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Track is the Schema for the tracks API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          environments:
            description: Environments enumerates a logical ordering of environments
              through which a change represented by a Ticket should be progressed.
            items:
              description: Environment represents a single environment through which
                a change represented by a Ticket should be progressed.
              properties:
                applications:
                  description: Applications is a list of references to existing Argo
                    CD Application resources that manage deployments to this Environment.
                  items:
                    type: string
                  type: array
                name:
                  description: Name is a name for the environment.
                  type: string
                tracks:
                  description: Tracks is a list of references to other existing K8sTA
                    Track resources. When the change represented by a Ticket reaches
                    this Environment, a new Ticket representing the same change will
                    be created for each of these Tracks. i.e. This permits the composition
                    of complex trees from segments of linear Track.
                  items:
                    type: string
                  type: array
              type: object
            type: array
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          repositorySubscriptions:
            description: RepositorySubscriptions specifies image repositories that
              the Track is effectively subscribed to. When a push to any one of these
              repositories is detected, it will trigger the progressive deployment
              of the new image through the Track's environments.
            items:
              description: RepositorySubscription defines a subscription to an image
                repository.
              properties:
                allowTags:
                  description: AllowTags is a regular expression that can optionally
                    be used to limit the image tags that are considered in determining
                    the newest version of an image.
                  type: string
                ignoreTags:
                  description: IgnoreTags is a list of tags that must be ignored when
                    determining the newest version of an image. No regular expressions
                    or glob patterns are supported yet.
                  items:
                    type: string
                  type: array
                pullSecret:
                  description: PullSecret is a reference to a Kubernetes Secret containing
                    repository credentials. If left unspecified, K8sTA will fall back
                    on globally configured repository credentials, if they exist.
                  type: string
                repoURL:
                  description: RepoURL specifies the URL of the image repository to
                    subscribe to. The value in this field MUST NOT include an image
                    tag.
                  type: string
                updateStrategy:
                  description: UpdateStrategy specifies the rules for how to identify
                    the newest version of the image specified by the RepoURL field.
                  type: string
              type: object
            type: array
        type: object
    served: true
    storage: true
